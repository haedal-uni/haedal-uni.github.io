<!DOCTYPE html><html lang="ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Socketio와 nltk를 사용한 챗봇 구현" /><meta property="og:locale" content="ko" /><meta name="description" content="Python-SocketIO와 NLTK를 사용한 챗봇 구현 Python-SocketIO를 활용하여 실시간 양방향 통신을 구현하고 NLTK를 사용한 간단한 챗봇 기능을 추가했다." /><meta property="og:description" content="Python-SocketIO와 NLTK를 사용한 챗봇 구현 Python-SocketIO를 활용하여 실시간 양방향 통신을 구현하고 NLTK를 사용한 간단한 챗봇 기능을 추가했다." /><link rel="canonical" href="https://haedal-uni.github.io//posts/SocketIO%EC%99%80-NLTK%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%B1%97%EB%B4%87-%EA%B5%AC%ED%98%84/" /><meta property="og:url" content="https://haedal-uni.github.io//posts/SocketIO%EC%99%80-NLTK%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%B1%97%EB%B4%87-%EA%B5%AC%ED%98%84/" /><meta property="og:site_name" content="Dal Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-22T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Socketio와 nltk를 사용한 챗봇 구현" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-01-26T17:37:25+09:00","datePublished":"2025-01-22T00:00:00+09:00","description":"Python-SocketIO와 NLTK를 사용한 챗봇 구현 Python-SocketIO를 활용하여 실시간 양방향 통신을 구현하고 NLTK를 사용한 간단한 챗봇 기능을 추가했다.","headline":"Socketio와 nltk를 사용한 챗봇 구현","mainEntityOfPage":{"@type":"WebPage","@id":"https://haedal-uni.github.io//posts/SocketIO%EC%99%80-NLTK%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%B1%97%EB%B4%87-%EA%B5%AC%ED%98%84/"},"url":"https://haedal-uni.github.io//posts/SocketIO%EC%99%80-NLTK%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%B1%97%EB%B4%87-%EA%B5%AC%ED%98%84/"}</script><title>Socketio와 nltk를 사용한 챗봇 구현 | Dal Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dal Blog"><meta name="application-name" content="Dal Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/cotes2020/chirpy-images/main/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dal Blog</a></div><div class="site-subtitle font-italic">한 걸음씩</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/haedal-uni" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Socketio와 nltk를 사용한 챗봇 구현</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Socketio와 nltk를 사용한 챗봇 구현</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1737471600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 22, 2025 </em> </span> <span> Updated <em class="" data-ts="1737880645" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 26, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/haedal-uni">haedal-uni</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2541 words"> <em>14 min</em> read</span></div></div></div><div class="post-content"><h1 id="python-socketio와-nltk를-사용한-챗봇-구현">Python-SocketIO와 NLTK를 사용한 챗봇 구현</h1><p>Python-SocketIO를 활용하여 실시간 양방향 통신을 구현하고 NLTK를 사용한 간단한 챗봇 기능을 추가했다.</p><p>Spring과 WebSocket으로 채팅을 구현한 경험이 있어 이를 비교하면서 적용하니 이해가 더 쉬웠다.</p><p>Spring WebSocket 경험이 있다면 SocketIO을 이해하는 데 도움이 될 것이다.</p><p><br /></p><p><img data-src="https://github.com/user-attachments/assets/c931e6c0-c66e-4694-b8c6-7f6c5b7e38d7" alt="AC_ 20250126-172901" width="50%" data-proofer-ignore></p><p><br /><br /></p><h2 id="1-기본-설정"><span class="mr-2">1. 기본 설정</span><a href="#1-기본-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h4 id="가상환경"><span class="mr-2">가상환경</span><a href="#가상환경" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>python <span class="nt">-m</span> venv venv
<span class="nb">source </span>venv/Scripts/activate
deactivate
</pre></table></code></div></div><p><br /><br /></p><h4 id="라이브러리-설치"><span class="mr-2">라이브러리 설치</span><a href="#라이브러리-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>pip <span class="nb">install </span>nltk
pip <span class="nb">install </span>python-socketio
pip <span class="nb">install </span>eventlet
</pre></table></code></div></div><p><br /><br /><br /><br /></p><h2 id="2-python-socketio"><span class="mr-2">2. Python-SocketIO</span><a href="#2-python-socketio" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Python-SocketIO는 Python 애플리케이션에서 Socket.IO 서버와 client를 쉽게 구현할 수 있게 해주는 라이브러리다.</p><p>Socket.IO는 실시간 웹 애플리케이션을 위한 JavaScript 라이브러리 및 프로토콜로</p><p>WebSocket을 기반으로 하면서 WebSocket이 제공하지 않는 기능들(ex: 자동 재연결, 방(broadcasting), room)을 추가로 지원한다.</p><p><br /><br /><br /></p><h3 id="주요-기능"><span class="mr-2">주요 기능</span><a href="#주요-기능" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>양방향 통신 : 서버와 클라이언트 간의 실시간 양방향 통신을 구현할 수 있다.</p><li><p>네임스페이스 및 room 지원 : 메시지의 범위를 제한하기 위해 네임스페이스와 room을 사용할 수 있다.</p><li><p>다양한 클라이언트 지원 : JavaScript, iOS, Android 등 다양한 client와 통신이 가능하다.</p><li><p>비동기 서버 지원 : <code class="language-plaintext highlighter-rouge">asyncio</code>, <code class="language-plaintext highlighter-rouge">gevent</code>, <code class="language-plaintext highlighter-rouge">eventlet</code>과 같은 Python의 비동기 프레임워크와 통합하여 사용할 수 있다.</p><li><p>내장된 WSGI 애플리케이션 : 별도의 웹 서버 없이도 독립적으로 실행할 수 있는 WSGI 애플리케이션을 제공한다.</p></ul><p><br /><br /></p><h4 id="네임스페이스와-room"><span class="mr-2">네임스페이스와 Room</span><a href="#네임스페이스와-room" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>내가 이해한대로 정리를 하자면</p><p>네임스페이스 : Spring에서 WebSocket 경로를 지정하는 endpoint와 유사</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">registry</span><span class="o">.</span><span class="na">addEndpoint</span><span class="o">(</span><span class="s">"/coco"</span><span class="o">).</span><span class="na">setAllowedOriginPatterns</span><span class="o">(</span><span class="s">"*"</span><span class="o">).</span><span class="na">withSockJS</span><span class="o">();</span>
<span class="n">registry</span><span class="o">.</span><span class="na">addEndpoint</span><span class="o">(</span><span class="s">"/coco/chat"</span><span class="o">).</span><span class="na">setAllowedOriginPatterns</span><span class="o">(</span><span class="s">"*"</span><span class="o">).</span><span class="na">withSockJS</span><span class="o">();</span>
</pre></table></code></div></div><p>Room : Spring에서 UUID를 생성해 사용자별 roomId를 관리하는 방식과 유사</p><p>Python에서는 client를 그룹화해 개별 Room을 제공 (기본적으로 세션 ID(<code class="language-plaintext highlighter-rouge">sid</code>)를 사용하여 구분)</p><p><br /><br /><br /></p><h4 id="spring의-websocket과-차이점"><span class="mr-2">spring의 websocket과 차이점</span><a href="#spring의-websocket과-차이점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>spring</strong> : <code class="language-plaintext highlighter-rouge">@MessageMapping</code>을 통해 메시지 경로 연결</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">client</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">/app/chat.sendMessage</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">chatMessage</span><span class="p">));</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@MessageMapping</span><span class="o">(</span><span class="s">"chat.sendMessage"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="nd">@Payload</span> <span class="nc">ChatMessage</span> <span class="n">chatMessage</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">rabbitTemplate</span><span class="o">.</span><span class="na">convertAndSend</span><span class="o">(</span><span class="n">sendExchange</span><span class="o">,</span> <span class="s">"room."</span> <span class="o">+</span> <span class="n">roomId</span><span class="o">,</span> <span class="n">chatMessage</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /><br /></p><p><strong>Python-SocketIO</strong> : 이벤트 이름으로 동작</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">socket</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_message</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">command</span><span class="p">:</span> <span class="nx">selectedCommand</span><span class="p">,</span> <span class="na">word</span><span class="p">:</span> <span class="nx">message</span> <span class="p">});</span>  
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">my_message</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">sio</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="sh">'</span><span class="s">reply</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">"</span><span class="s">response</span><span class="sh">"</span><span class="p">:</span> <span class="n">response</span><span class="p">})</span>
</pre></table></code></div></div><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">socket</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="sh">"</span><span class="s">reply</span><span class="sh">"</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
<span class="p">})</span>
</pre></table></code></div></div><p><br /><br /></p><p>Spring에서는 uuid를 생성해 roomId로 개별 채팅을 구분했지만</p><p>Python에서는 기본 제공하는 세션 ID(<code class="language-plaintext highlighter-rouge">sid</code>)로 개별 채팅 가능했다. (별도의 설정x)</p><p><code class="language-plaintext highlighter-rouge">sio.emit('message', data, room=sid)</code></p><p><br /><br /></p><p>spring websocket에서는 사용자가 채팅을 종료할 때 모달에서 진행되다보니 새로고침이 아닌</p><p>닫기 버튼이나 다른 화면을 클릭해 채팅 모달만 없어지게 하는 경우</p><p>종료 감지가 되지 않아 disconnect라고 client에서 값을 줘야 했는데</p><p><code class="language-plaintext highlighter-rouge">Python-SocketIO</code>에서는 Client에서 따로 작성하지 않아도 disconnect가 처리되었다.</p><p><br /><br /><br /><br /></p><h3 id="구현--python-socketio"><span class="mr-2">구현 : Python-SocketIO</span><a href="#구현--python-socketio" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">socket.py</code>으로 client와 연결 후 <code class="language-plaintext highlighter-rouge">nltk_command.py</code>를 통해 사용자가 원하는 결과값을 제공하는 것으로 구현했다.</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">src</span>          
<span class="o">|</span><span class="n">__</span> <span class="n">socket</span><span class="p">.</span><span class="n">py</span> <span class="c1"># SocketIO 서버 구현                     
</span><span class="o">|</span><span class="n">__</span> <span class="n">nltk_command</span><span class="p">.</span><span class="n">py</span> <span class="c1"># NLTK 관련 명령 처리         
</span></pre></table></code></div></div><p><br /><br /></p><h4 id="import--from-"><span class="mr-2">import … from …</span><a href="#import--from-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">socketio</span>
<span class="n">sio</span> <span class="o">=</span> <span class="n">socketio</span><span class="p">.</span><span class="nc">Server</span><span class="p">(</span><span class="n">cors_allowed_origins</span><span class="o">=</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span> <span class="o">=</span> <span class="n">socketio</span><span class="p">.</span><span class="nc">WSGIApp</span><span class="p">(</span><span class="n">sio</span><span class="p">,</span> <span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span><span class="p">)</span>

<span class="c1">#########################################################
</span>
<span class="kn">from</span> <span class="n">socketio</span> <span class="kn">import</span> <span class="n">Server</span><span class="p">,</span> <span class="n">WSGIApp</span>
<span class="n">sio</span> <span class="o">=</span> <span class="nc">Server</span><span class="p">(</span><span class="n">cors_allowed_origins</span><span class="o">=</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span> <span class="o">=</span> <span class="nc">WSGIApp</span><span class="p">(</span><span class="n">sio</span><span class="p">,</span> <span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span><span class="p">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">import ~</code> 라이브러리 전체를 가져온다. (모든 것을 사용할 수 있지만 필요 없는 항목까지 로드)</p><p><code class="language-plaintext highlighter-rouge">from ... import ...</code> : 라이브러리에서 특정 항목만 가져온다. (필요한 물건(ex. WSGIApp)만 꺼내 사용)</p><p><code class="language-plaintext highlighter-rouge">from a import b</code> : 모듈 a에서 특정 항목 b만 가져온다.</p><p>*후자는 socketio 모듈 전체가 필요하지 않고 특정 클래스(Server, WSGIApp)만 사용해 from을 사용한 것.</p><p><br /><br /><br /></p><h4 id="이벤트-핸들링"><span class="mr-2">이벤트 핸들링</span><a href="#이벤트-핸들링" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">@sio.on('event_name')</code> : 명시적으로 이벤트 이름 지정(이벤트 이름이 함수 이름과 다를 경우)</p><p><code class="language-plaintext highlighter-rouge">@sio.event</code> : 함수 이름을 이벤트 이름으로 자동 설정(이벤트 이름과 함수 이름이 동일할 경우)</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nd">@sio.on</span><span class="p">(</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Message received</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">environ</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Client connected: </span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">my_message</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">sio</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="sh">'</span><span class="s">reply</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">"</span><span class="s">response</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Message Received</span><span class="sh">"</span><span class="p">},</span> <span class="n">room</span><span class="o">=</span><span class="n">sid</span><span class="p">)</span>

<span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="n">sid</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Client disconnected: </span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>연결(<code class="language-plaintext highlighter-rouge">connect</code>): <code class="language-plaintext highlighter-rouge">sid</code>(client의 세션 ID)와 <code class="language-plaintext highlighter-rouge">environ</code>(환경 정보) 확인<ul><li><code class="language-plaintext highlighter-rouge">environ</code> : client 연결과 관련된 HTTP 환경 정보 (IP 주소, 헤더 등)</ul><li><p>메시지 수신(<code class="language-plaintext highlighter-rouge">my_message</code>): 데이터 처리</p><li>연결 종료(<code class="language-plaintext highlighter-rouge">disconnect</code>): 자동 감지</ul><p><br /></p><p>*<code class="language-plaintext highlighter-rouge">connect</code>, <code class="language-plaintext highlighter-rouge">disconnect</code>와 같이 이미 정의된 event의 파라미터는 필수로 작성해야한다.</p><p>(<code class="language-plaintext highlighter-rouge">connect</code>는 연결된 클라이언트의 정보를 처리하기 위해 <code class="language-plaintext highlighter-rouge">sid</code>와 <code class="language-plaintext highlighter-rouge">environ</code>이 필요)</p><p><br /><br /><br /></p><h4 id="비동기-서버-실행"><span class="mr-2">비동기 서버 실행</span><a href="#비동기-서버-실행" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>RuntimeError: You need to use the eventlet server</p><p>Flask의 기본 실행 방법인 <code class="language-plaintext highlighter-rouge">app.run()</code>을 사용했더니 오류가 떴다.</p><p><br /></p><p>Flask의 기본 실행 방식(<code class="language-plaintext highlighter-rouge">app.run()</code>)은 WebSocket 통신을 지원하지 않는다.</p><p>→ <code class="language-plaintext highlighter-rouge">Eventlet</code>를 적용 (비동기 지원을 위해 이벤트 기반 웹 서버를 실행)</p><p><code class="language-plaintext highlighter-rouge">eventlet.wsgi.server(eventlet.listen(('0.0.0.0', 5000)), app)</code></p><p><br /><br /><br /></p><h4 id="room"><span class="mr-2">room</span><a href="#room" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">sio.emit('reply', {"response": response}, room=sid)</code></p><p>Socket.IO는 자동으로 클라이언트를 세션 ID(<code class="language-plaintext highlighter-rouge">sid</code>)에 해당하는 기본 Room에 연결한다. (따로 설정x)</p><p>따라서 <code class="language-plaintext highlighter-rouge">room=sid</code>로 특정 클라이언트에게만 메시지를 전송할 수 있다.</p><p><br /><br /></p><p>Room을 별도로 생성하고 관리하려면 아래와 같이 구현하면 된다.</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">room_id</span> <span class="o">=</span> <span class="nf">generate_room_id</span><span class="p">()</span>  <span class="c1"># Room ID 생성(임의의 uuid 생성 함수)  
</span><span class="n">sio</span><span class="p">.</span><span class="nf">enter_room</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">room_id</span><span class="p">)</span>  <span class="c1"># Room에 join 
</span><span class="n">sio</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">room</span><span class="o">=</span><span class="n">room_id</span><span class="p">)</span>  <span class="c1"># Room에 메시지 전송
</span></pre></table></code></div></div><p><br /></p><p>room1은 챗봇, room2는 일반 채팅방과 같이 분리를 할 수 있다.</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">sio</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">room</span><span class="o">=</span><span class="sh">'</span><span class="s">room1</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># 'room1'에만 전송
</span></pre></table></code></div></div><p>*client는 특정 room에 지속적으로 연결 되어야 하는 경우(ex. 채팅 기록 저장) roomId를 기억해야한다.</p><p><br /></p><p>나는 단순 챗봇이고 굳이 채팅 기록을 남겨야 할 이유가 없어서 <code class="language-plaintext highlighter-rouge">sid</code>를 활용하기로 했다.</p><p>따라서 client에서 기억할 필요가 없다.</p><p><br /><br /><br /></p><h4 id="전체-코드"><span class="mr-2">전체 코드</span><a href="#전체-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="c1"># 기본 설정
</span><span class="kn">import</span> <span class="n">socketio</span>
<span class="kn">from</span> <span class="n">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="n">src.nltk_command</span> <span class="kn">import</span> <span class="n">nltk_command</span>
<span class="kn">import</span> <span class="n">eventlet</span>

<span class="n">sio</span> <span class="o">=</span> <span class="n">socketio</span><span class="p">.</span><span class="nc">Server</span><span class="p">(</span><span class="n">cors_allowed_origins</span><span class="o">=</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 모든 origin에서 연결 허용
</span><span class="n">app</span> <span class="o">=</span> <span class="nc">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span> <span class="o">=</span> <span class="n">socketio</span><span class="p">.</span><span class="nc">WSGIApp</span><span class="p">(</span><span class="n">sio</span><span class="p">,</span> <span class="n">app</span><span class="p">.</span><span class="n">wsgi_app</span><span class="p">)</span> <span class="c1"># Flask와 WebSocket 기능을 결합
</span>
<span class="c1"># 이벤트 핸들링
</span><span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">environ</span><span class="p">):</span> <span class="c1"># client 연결
</span>    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">environ : </span><span class="si">{</span><span class="n">environ</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Client connected: </span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">my_message</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">command</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">word</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">command</span><span class="o">==</span><span class="sh">"</span><span class="s">lemmatizer</span><span class="sh">"</span> <span class="p">:</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">"</span><span class="s">pos</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">process_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">process_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>

   <span class="c1"># 특정 client에게 메시지 전송  
</span>    <span class="n">sio</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="sh">'</span><span class="s">reply</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">"</span><span class="s">option</span><span class="sh">"</span> <span class="p">:</span> <span class="n">command</span><span class="p">,</span> <span class="sh">"</span><span class="s">response</span><span class="sh">"</span><span class="p">:</span> <span class="n">response</span><span class="p">},</span> <span class="n">room</span><span class="o">=</span><span class="n">sid</span><span class="p">)</span>

<span class="nd">@sio.event</span>
<span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="n">sid</span><span class="p">):</span> <span class="c1"># client 연결 종료 
</span>    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Client disconnected: </span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 서버 실행 
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="n">eventlet</span><span class="p">.</span><span class="n">wsgi</span><span class="p">.</span><span class="nf">server</span><span class="p">(</span><span class="n">eventlet</span><span class="p">.</span><span class="nf">listen</span><span class="p">((</span><span class="sh">'</span><span class="s">0.0.0.0</span><span class="sh">'</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)),</span> <span class="n">app</span><span class="p">)</span>
</pre></table></code></div></div><p><br /><br /> <br /><br /></p><hr /><h2 id="3-nltk"><span class="mr-2">3. nltk</span><a href="#3-nltk" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">n</code>: noun, <code class="language-plaintext highlighter-rouge">v</code>: verb, <code class="language-plaintext highlighter-rouge">a</code>: adjective, <code class="language-plaintext highlighter-rouge">s</code>: adjective satellite, <code class="language-plaintext highlighter-rouge">r</code>: adverb</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">nltk.corpus</span> <span class="kn">import</span> <span class="n">wordnet</span> <span class="k">as</span> <span class="n">wn</span>
<span class="kn">from</span> <span class="n">nltk.stem</span> <span class="kn">import</span> <span class="n">WordNetLemmatizer</span>
<span class="kn">import</span> <span class="n">json</span>

<span class="c1"># 동의어 
</span><span class="k">def</span> <span class="nf">get_synonyms</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">synsets</span> <span class="o">=</span> <span class="n">wn</span><span class="p">.</span><span class="nf">synsets</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="n">synonyms</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">synset</span> <span class="ow">in</span> <span class="n">synsets</span><span class="p">:</span>
        <span class="n">synonyms</span><span class="p">.</span><span class="nf">extend</span><span class="p">([</span><span class="n">lemma</span><span class="p">.</span><span class="nf">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">lemma</span> <span class="ow">in</span> <span class="n">synset</span><span class="p">.</span><span class="nf">lemmas</span><span class="p">()])</span>
    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">set</span><span class="p">(</span><span class="n">synonyms</span><span class="p">))</span>  <span class="c1"># 중복 제거
</span>
<span class="c1"># 예문
</span><span class="k">def</span> <span class="nf">get_examples</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">synsets</span> <span class="o">=</span> <span class="n">wn</span><span class="p">.</span><span class="nf">synsets</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="n">examples</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">synset</span> <span class="ow">in</span> <span class="n">synsets</span><span class="p">:</span>
        <span class="n">examples</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">synset</span><span class="p">.</span><span class="nf">examples</span><span class="p">())</span>  <span class="c1"># .examples()는 문자열을 반환
</span>    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">set</span><span class="p">(</span><span class="n">examples</span><span class="p">))</span>

<span class="c1"># 정의
</span><span class="k">def</span> <span class="nf">get_definition</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">synsets</span> <span class="o">=</span> <span class="n">wn</span><span class="p">.</span><span class="nf">synsets</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="n">definitions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">synset</span> <span class="ow">in</span> <span class="n">synsets</span><span class="p">:</span>
        <span class="n">definitions</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">synset</span><span class="p">.</span><span class="nf">definition</span><span class="p">())</span>  <span class="c1"># 단일 문자열을 추가
</span>    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">set</span><span class="p">(</span><span class="n">definitions</span><span class="p">))</span>

<span class="c1"># 단어의 품사(동사, 명사 등)
</span><span class="k">def</span> <span class="nf">get_pos</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">synsets</span> <span class="o">=</span> <span class="n">wn</span><span class="p">.</span><span class="nf">synsets</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="n">pos_tags</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">synset</span> <span class="ow">in</span> <span class="n">synsets</span><span class="p">:</span>
        <span class="n">pos_tags</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">synset</span><span class="p">.</span><span class="nf">pos</span><span class="p">())</span>  
    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">set</span><span class="p">(</span><span class="n">pos_tags</span><span class="p">))</span>

<span class="c1"># 표제어 추출 
</span><span class="k">def</span> <span class="nf">get_lemmatizer</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">lemmatizer</span> <span class="o">=</span> <span class="nc">WordNetLemmatizer</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">lemmatizer</span><span class="p">.</span><span class="nf">lemmatize</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">process_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">response</span>
    <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="sh">"</span><span class="s">synonyms</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">get_synonyms</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="sh">"</span><span class="s">examples</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">get_examples</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="sh">"</span><span class="s">definition</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">get_definition</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="sh">"</span><span class="s">pos</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">get_pos</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="sh">"</span><span class="s">lemmatizer</span><span class="sh">"</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nf">get_lemmatizer</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></table></code></div></div><p><br /><br /></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">lemmas_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">lemma</span> <span class="ow">in</span> <span class="n">synset</span><span class="p">.</span><span class="nf">lemmas</span><span class="p">():</span>
    <span class="n">lemmas_list</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">lemma</span><span class="p">.</span><span class="nf">name</span><span class="p">())</span>

<span class="err">→</span> <span class="n">lemmas_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">lemma</span><span class="p">.</span><span class="nf">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">lemma</span> <span class="ow">in</span> <span class="n">synset</span><span class="p">.</span><span class="nf">lemmas</span><span class="p">()]</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">synonyms.extend([lemma.name() for lemma in synset.lemmas()])</code></p><p>synonyms 리스트에 lemma.name()으로 생성된 리스트를 항목별로 추가한다.</p><p><br /><br /><br /></p><h2 id="4-문제-해결"><span class="mr-2">4. 문제 해결</span><a href="#4-문제-해결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h4 id="append와-extend"><span class="mr-2">append와 extend</span><a href="#append와-extend" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>동의어와 예문은 list 형태로 반환되므로 extend를 사용해 개별 요소를 추가</p><li><p>정의와 품사는 단일 문자열로 반환되므로 append 사용</p></ul><p><br /></p><p><code class="language-plaintext highlighter-rouge">append</code>는 리스트에 하나의 객체(item)를 그대로 추가하고 <code class="language-plaintext highlighter-rouge">a.append([1, 2]) → a = [[1, 2]]</code></p><p><code class="language-plaintext highlighter-rouge">extend</code>는 리스트에 다른 요소를 개별적으로 추가한다. <code class="language-plaintext highlighter-rouge">a.extend([1, 2]) → a = [1, 2]</code></p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">synonyms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">synonyms</span><span class="p">.</span><span class="nf">append</span><span class="p">([</span><span class="sh">"</span><span class="s">example</span><span class="sh">"</span><span class="p">])</span>  <span class="c1"># [['example']]
</span><span class="n">synonyms</span><span class="p">.</span><span class="nf">extend</span><span class="p">([</span><span class="sh">"</span><span class="s">example</span><span class="sh">"</span><span class="p">])</span> <span class="c1"># ['example']
</span></pre></table></code></div></div><p><br /></p><p>따라서 동의어와 예문을 <code class="language-plaintext highlighter-rouge">append()</code>로 사용하게 된다면 <code class="language-plaintext highlighter-rouge">[["a"],["b"]]</code>와 같이 리스트 안에 리스트가 생기기 때문에</p><p>개별적으로 리스트에 추가하는 <code class="language-plaintext highlighter-rouge">extend()</code>를 사용했다.</p><p><br /><br /><br /></p><h4 id="typeerror-object-of-type-set-is-not-json-serializable"><span class="mr-2">TypeError: Object of type set is not JSON serializable</span><a href="#typeerror-object-of-type-set-is-not-json-serializable" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">json</span>

<span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">)</span> 
</pre></table></code></div></div><p>반환 데이터를 <code class="language-plaintext highlighter-rouge">json.dumps()</code>로 해결</p><p><br /><br /><br /></p><h4 id="list와-"><span class="mr-2">list와 <code class="language-plaintext highlighter-rouge">[]</code></span><a href="#list와-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1"># 품사 알기
</span><span class="k">def</span> <span class="nf">get_lemmatizer</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">lemmatizer</span> <span class="o">=</span> <span class="nc">WordNetLemmatizer</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">lemmatizer</span><span class="p">.</span><span class="nf">lemmatize</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">pos</span><span class="p">)]</span>
</pre></table></code></div></div><p>처음엔 return값을 <code class="language-plaintext highlighter-rouge">list(lemmatizer.lemmatize(word, pos))</code>로 작성했더니</p><p>hello를 입력했을 때 반환 값이 <code class="language-plaintext highlighter-rouge">["h", "e", "l", "l", "o"]</code> 로 출력되었다.</p><p>따라서 hello로 출력하기 위해 <code class="language-plaintext highlighter-rouge">list()</code> 대신 <code class="language-plaintext highlighter-rouge">[]</code>를 사용해 <code class="language-plaintext highlighter-rouge">[lemmatizer.lemmatize(word, pos)]</code>로 작성했다.</p><p><br /></p><p><code class="language-plaintext highlighter-rouge">list()</code> 함수는 문자열을 문자 단위로 쪼개어 리스트로 변환한다. <code class="language-plaintext highlighter-rouge">hello → ['h', 'e', 'l', 'l', 'o']</code></p><p><code class="language-plaintext highlighter-rouge">[]</code>는 원하는 값을 리스트의 요소로 직접 추가한다. <code class="language-plaintext highlighter-rouge">hello → ['hello']</code></p><p>참고로 <code class="language-plaintext highlighter-rouge">list()</code>로 작성하는 것보다 <code class="language-plaintext highlighter-rouge">[]</code>(대괄호)를 사용하는게 성능이 더 좋다고 한다.</p><p><br /><br /><br /><br /></p><hr /><p><strong>REFERENCE</strong> <br /> wordnet</p><ul><li><a href="https://github.com/nltk/wordnet">wordnet</a><li><a href="https://teteker.tistory.com/12">워드넷(wordnet)을 재밌게 활용하기</a><li><a href="https://sens.tistory.com/455">[Python] WordNet으로 각 단어별 연관어(연상어) 추출하기</a><li><a href="https://wikidocs.net/21707">02-03 어간 추출(Stemming) and 표제어 추출(Lemmatization)</a></ul><p>python</p><ul><li><a href="https://m.blog.naver.com/wideeyed/221541104629">[Python] list append()와 extend() 차이점</a><li><a href="https://conansjh20.tistory.com/79">Python, <code class="language-plaintext highlighter-rouge">[]</code>(대괄호)와 list()의 차이</a></ul><p>Socket.IO</p><ul><li><a href="https://wikidocs.net/236800">python-socketio: 파이썬 Socket.IO 서버 및 클라이언트</a><li><a href="https://blog.naver.com/shino1025/222179697262">[Flask] 플라스크로 채팅 기능을 구현해보자</a><li><a href="https://velog.io/@stresszero/python-socketio">python-socketio로 Socket.io서버를 생성하고 Django와 통합하여 배포하기</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/eng-project/'>Eng-Project</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/log/" class="post-tag no-text-decoration" >log</a> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a> <a href="/tags/flask/" class="post-tag no-text-decoration" >Flask</a> <a href="/tags/socketio/" class="post-tag no-text-decoration" >SocketIO</a> <a href="/tags/nltk/" class="post-tag no-text-decoration" >NLTK</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Socketio%EC%99%80+nltk%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%9C+%EC%B1%97%EB%B4%87+%EA%B5%AC%ED%98%84+-+Dal+Blog&url=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FSocketIO%25EC%2599%2580-NLTK%25EB%25A5%25BC-%25EC%2582%25AC%25EC%259A%25A9%25ED%2595%259C-%25EC%25B1%2597%25EB%25B4%2587-%25EA%25B5%25AC%25ED%2598%2584%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Socketio%EC%99%80+nltk%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%9C+%EC%B1%97%EB%B4%87+%EA%B5%AC%ED%98%84+-+Dal+Blog&u=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FSocketIO%25EC%2599%2580-NLTK%25EB%25A5%25BC-%25EC%2582%25AC%25EC%259A%25A9%25ED%2595%259C-%25EC%25B1%2597%25EB%25B4%2587-%25EA%25B5%25AC%25ED%2598%2584%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FSocketIO%25EC%2599%2580-NLTK%25EB%25A5%25BC-%25EC%2582%25AC%25EC%259A%25A9%25ED%2595%259C-%25EC%25B1%2597%25EB%25B4%2587-%25EA%25B5%25AC%25ED%2598%2584%2F&text=Socketio%EC%99%80+nltk%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%9C+%EC%B1%97%EB%B4%87+%EA%B5%AC%ED%98%84+-+Dal+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="haedal-uni/comments" issue-term="title" label="comments" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%ED%86%B5%ED%95%A9-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0/">통합 파일 작성하기</a><li><a href="/posts/Excel_%EC%9E%90%EB%8F%99%ED%99%94/">Excel_자동화</a><li><a href="/posts/%EB%8B%A8%EC%B6%95%ED%82%A4/">단축키</a><li><a href="/posts/%EA%B4%91%EA%B3%A0-%EB%8D%B0%EC%9D%B4%ED%84%B0/">광고 데이터</a><li><a href="/posts/Google-Analytics/">Google analytics</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/study/">study</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/chat/">Chat</a> <a class="post-tag" href="/tags/log/">log</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/websocket/">WebSocket</a> <a class="post-tag" href="/tags/data-structure/">Data-Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Python%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%ED%8C%8C%EC%9D%B4%EC%B0%A8%ED%8A%B8-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1/"><div class="card-body"> <em class="small" data-ts="1737730800" data-df="ll" > Jan 25, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Python을 활용한 파이차트 이미지 생성</h3><div class="text-muted small"><p> Python을 활용한 파이 차트 이미지 생성 이번 글은 python에서 파이 차트를 만들어 js에서 이미지로 보여주는 과정을 정리한 글이다. 1. DB 연결하기 환경변수 설정 환경 변수 파일(.env)을 활용하여 DB 연결 정보를 보호한다. DB_TYPE=mysql DB_DRIVER=pymysql DB_HOST=127.0.0.1 DB_USE...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9%EA%B3%BC-%EC%84%B1%EA%B3%BC-%EB%B6%84%EC%84%9D/"><div class="card-body"> <em class="small" data-ts="1739977200" data-df="ll" > Feb 20, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>상호작용과 성과 분석</h3><div class="text-muted small"><p> 문제 정의 사용자들의 학습성과를 높이려면? 기능 구현을 하면서 사용자들의 학습 성과를 높이려면 어떤 요소가 중요한지 고민하며 분석을 진행했다. 데이터는 Kaggle의 ONLINE EDUCATION SYSTEM REVIEW 데이터를 사용했으며 실제 프로젝트 데이터는 양이 적어 편향된 결과를 가져올 수 있어 제외했다. 데이터 전처리 1 2 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%84%9D/"><div class="card-body"> <em class="small" data-ts="1737817200" data-df="ll" > Jan 26, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>데이터 분석</h3><div class="text-muted small"><p> 데이터 분석 1. 데이터 가져오기 1 2 3 4 5 import pandas as pd # CSV 파일 불러오기 data = pd.read_csv(&#39;../kaggle/StudentPerformanceFactors.csv&#39;) print(data.head()) pandas : 데이터 처리 및 분석을 위한 라이브러리 read_csv : CSV 파일을 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EA%B2%80%EC%83%89%EC%96%B4-%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1/" class="btn btn-outline-primary" prompt="Older"><p>검색어 자동완성</p></a> <a href="/posts/Python%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%ED%8C%8C%EC%9D%B4%EC%B0%A8%ED%8A%B8-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1/" class="btn btn-outline-primary" prompt="Newer"><p>Python을 활용한 파이차트 이미지 생성</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/haedal-uni">haedal-uni</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/study/">study</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/chat/">Chat</a> <a class="post-tag" href="/tags/log/">log</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/websocket/">WebSocket</a> <a class="post-tag" href="/tags/data-structure/">Data-Structure</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-K7KC8XYH0P"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-K7KC8XYH0P'); }); </script>
