<!DOCTYPE html><html lang="ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Quiz 저장하기" /><meta property="og:locale" content="ko" /><meta name="description" content="Quiz 저장하기 Quiz 기능을 구현하기 위해 데이터를 저장하고 조회하는 과정을 진행했다." /><meta property="og:description" content="Quiz 저장하기 Quiz 기능을 구현하기 위해 데이터를 저장하고 조회하는 과정을 진행했다." /><link rel="canonical" href="https://haedal-uni.github.io//posts/Quiz-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0/" /><meta property="og:url" content="https://haedal-uni.github.io//posts/Quiz-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0/" /><meta property="og:site_name" content="Dal Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-05T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Quiz 저장하기" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-12-20T21:45:40+09:00","datePublished":"2024-12-05T00:00:00+09:00","description":"Quiz 저장하기 Quiz 기능을 구현하기 위해 데이터를 저장하고 조회하는 과정을 진행했다.","headline":"Quiz 저장하기","mainEntityOfPage":{"@type":"WebPage","@id":"https://haedal-uni.github.io//posts/Quiz-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0/"},"url":"https://haedal-uni.github.io//posts/Quiz-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0/"}</script><title>Quiz 저장하기 | Dal Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dal Blog"><meta name="application-name" content="Dal Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/cotes2020/chirpy-images/main/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dal Blog</a></div><div class="site-subtitle font-italic">한 걸음씩</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/haedal-uni" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Quiz 저장하기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Quiz 저장하기</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1733324400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 5, 2024 </em> </span> <span> Updated <em class="" data-ts="1734698740" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 20, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/haedal-uni">haedal-uni</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2731 words"> <em>15 min</em> read</span></div></div></div><div class="post-content"><h1 id="quiz-저장하기">Quiz 저장하기</h1><p>Quiz 기능을 구현하기 위해 데이터를 저장하고 조회하는 과정을 진행했다.</p><p>이 글에서는 <strong>저장 과정</strong>을 중점적으로 다루며 조회 기능은 다음 글에서 확인 할 수 있다.</p><p><br /><br /></p><h2 id="quiz-저장"><span class="mr-2">Quiz 저장</span><a href="#quiz-저장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Quiz는 사용자가 학습한 단어를 기반으로 생성된다.</p><p>저장 방식 설계 시 두 가지 방안을 검토했다.</p><p><br /></p><p><strong>1.</strong> Quiz 테이블의 <code class="language-plaintext highlighter-rouge">status</code> 활용</p><p>Study 테이블에서 단어를 가져오고 Quiz 테이블에 정답 여부인 status(<code class="language-plaintext highlighter-rouge">correct</code>,<code class="language-plaintext highlighter-rouge">incorrect</code>)를 반영한다.</p><p><br /></p><p><strong>2.</strong> Study와 User를 연결</p><p><code class="language-plaintext highlighter-rouge">study_id</code>와 <code class="language-plaintext highlighter-rouge">user_id</code>를 Quiz 테이블에 저장하고 정답 여부를 Boolean 값으로 관리한다.</p><p><br /></p><p>나는 후자의 방법을 선택했다.</p><p><br /><br /><br /><br /></p><h2 id="quiz-db-저장하기"><span class="mr-2">Quiz db 저장하기</span><a href="#quiz-db-저장하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="https://github.com/user-attachments/assets/256b828c-b90c-4f22-954d-4b87cc6d10d3" alt="image" data-proofer-ignore></p><p><br /><br /></p><h3 id="entity"><span class="mr-2">Entity</span><a href="#entity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span><span class="o">(</span><span class="n">access</span> <span class="o">=</span> <span class="nc">AccessLevel</span><span class="o">.</span><span class="na">PROTECTED</span><span class="o">)</span> <span class="c1">// builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Quiz</span> <span class="o">{</span>
    <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@OneToOne</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"study_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Study</span> <span class="n">study</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">correct</span><span class="o">;</span>

    <span class="nd">@Builder</span>
    <span class="kd">public</span> <span class="nf">Quiz</span><span class="o">(</span><span class="nc">Study</span> <span class="n">study</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">study</span> <span class="o">=</span> <span class="n">study</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">correct</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Quiz</span> <span class="nf">addQuiz</span><span class="o">(</span><span class="nc">Study</span> <span class="n">study</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Quiz</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">study</span><span class="o">(</span><span class="n">study</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>사용자별로 퀴즈를 생성하고 퀴즈는 학습한 기준으로 생성하기 위해 User와 Study를 추가했다.</p><p><code class="language-plaintext highlighter-rouge">user_id</code> → <code class="language-plaintext highlighter-rouge">@ManyToOne</code> : 한 사용자가 여러 개의 Quiz를 생성 가능</p><p><code class="language-plaintext highlighter-rouge">study_id</code> → <code class="language-plaintext highlighter-rouge">@OneToOne</code> : 각 Study에 대해 Quiz는 한 번만 생성 가능</p><p><br /><br /><br /></p><h4 id="부모-자식-관계의-삭제-처리"><span class="mr-2">부모-자식 관계의 삭제 처리</span><a href="#부모-자식-관계의-삭제-처리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>특징<th><code class="language-plaintext highlighter-rouge">CascadeType.REMOVE</code><th><code class="language-plaintext highlighter-rouge">orphanRemoval=true</code><tbody><tr><td><strong>부모 엔티티 삭제</strong><td>부모 삭제 시 자식도 삭제됨<td>부모 삭제 시 자식도 삭제됨<tr><td><strong>부모 관계 끊길 시</strong><td>자식 데이터는 db에 남음<td>관계가 끊긴 자식도 삭제됨</table></div><p><code class="language-plaintext highlighter-rouge">orphanRemoval=true</code>를 사용하여 관계가 끊긴 자식도 삭제되도록 설정했다.</p><p><code class="language-plaintext highlighter-rouge">orphanRemoval=true</code>는 부모 entity에만 설정해야한다.</p><p><br /><br /></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">,</span> <span class="n">cascade</span> <span class="o">=</span> <span class="nc">CascadeType</span><span class="o">.</span><span class="na">REMOVE</span><span class="o">,</span> <span class="n">orphanRemoval</span><span class="o">=</span><span class="kc">true</span><span class="o">)</span>
    <span class="nd">@JsonIgnore</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Quiz</span><span class="o">&gt;</span> <span class="n">quizList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /><br /><br /><br /></p><h3 id="db-설계"><span class="mr-2">db 설계</span><a href="#db-설계" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="초기-설계"><span class="mr-2">초기 설계</span><a href="#초기-설계" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">quiz</span><span class="p">(</span>
    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">study_id</span> <span class="nb">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">correct</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">false</span><span class="p">,</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">study_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">study</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span>
<span class="p">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">correct</code>의 기본 값은 <code class="language-plaintext highlighter-rouge">false</code>로 설정했다.</p><p><br /><br /><br /></p><h4 id="수정--사용자별-데이터-관리-추가"><span class="mr-2">수정 : 사용자별 데이터 관리 추가</span><a href="#수정--사용자별-데이터-관리-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">user_id</code> 를 추가해 사용자별로 Quiz를 괸리할 수 있도록 적용</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">show</span> <span class="k">create</span> <span class="k">table</span> <span class="n">quiz</span><span class="p">;</span>
</pre></table></code></div></div><p>출력 값 🔽</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`quiz`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`study_id`</span> <span class="nb">bigint</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="nv">`correct`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'0'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
  <span class="k">KEY</span> <span class="nv">`study_id`</span> <span class="p">(</span><span class="nv">`study_id`</span><span class="p">),</span>
  <span class="k">CONSTRAINT</span> <span class="nv">`quiz_ibfk_1`</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`study_id`</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="nv">`study`</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span>
<span class="p">)</span> 
</pre></table></code></div></div><p><br /><br /></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">ALTER</span> <span class="k">table</span> <span class="n">quiz</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">user_id</span> <span class="nb">BIGINT</span> <span class="k">not</span> <span class="k">null</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">quiz</span> <span class="k">set</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">1</span> <span class="k">where</span> <span class="n">quiz</span><span class="p">.</span><span class="n">user_id</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">quiz</span> <span class="k">add</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">references</span> <span class="k">user</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">on</span> <span class="k">delete</span> <span class="k">cascade</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">quiz</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">quiz_ibfk_1</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">quiz</span> <span class="k">add</span> <span class="k">unique</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">study_id</span><span class="p">)</span>
</pre></table></code></div></div><p><br /><br /><br /><br /></p><h3 id="batch-insert와-saveall"><span class="mr-2">Batch Insert와 <code class="language-plaintext highlighter-rouge">saveAll()</code></span><a href="#batch-insert와-saveall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Study에 값을 저장할 때 같이 Quiz도 저장하면서 성능이 좋을까에 대해 의문이 생겼다.</p><p>Study의 id값을 가져와서 그 값을 Quiz에 저장을 하기 때문에 최대한 성능을 좋게 하고 싶었고</p><p>그 과정에서 Batch Insert를 알게되었다.</p><p><br /><br /><br /><br /></p><h4 id="save와-saveall"><span class="mr-2"><strong><code class="language-plaintext highlighter-rouge">save()</code></strong>와 <strong><code class="language-plaintext highlighter-rouge">saveAll()</code></strong></span><a href="#save와-saveall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>여러 건의 데이터를 insert 할 때는 <code class="language-plaintext highlighter-rouge">saveAll()</code>를 사용하는 것이 성능상 더 좋다.</p><p>그 이유는 <code class="language-plaintext highlighter-rouge">@Transactional</code> 때문이다.</p><p><br /></p><p>트랜잭션에서 다른 트랜잭션이 호출될 때 어떤 방식으로 처리할지 결정하는 것을 ‘트랜잭션의 전파 설정’이라고 한다.</p><p>여기서 <code class="language-plaintext highlighter-rouge">save()</code>와 <code class="language-plaintext highlighter-rouge">saveAll()</code>의 <code class="language-plaintext highlighter-rouge">@Transactional</code> 전파 속성은 default 속성인 ‘REQUIRED’가 적용되어 있다.</p><p>REQUIRED의 경우 별도의 트랜잭션이 설정되어 있지 않다면 새로운 트랜잭션을 생성하고</p><p>트랜잭션이 설정되어 있다면 해당 트랜잭션을 재사용한다.</p><p><br /><br /></p><p><code class="language-plaintext highlighter-rouge">save()</code> : 개별적으로 엔티티를 저장</p><p>각 호출 마다 entity의 기본 키(<code class="language-plaintext highlighter-rouge">@Id</code>)를 통해 새로운 엔티티인지 <code class="language-plaintext highlighter-rouge">isNew()</code>를 통해 확인한다.</p><p><br /></p><p><code class="language-plaintext highlighter-rouge">saveAll()</code> : 여러 entity를 한 번에 저장</p><p>내부적으로 <code class="language-plaintext highlighter-rouge">save()</code>를 반복 호출하지만 트랜잭션 전파 속성(<code class="language-plaintext highlighter-rouge">REQUIRED</code>) 덕분에 부모 트랜잭션을 재사용한다.</p><p><br /><br /> <br /></p><h4 id="entity-state-detection-strategies"><span class="mr-2">Entity State Detection Strategies</span><a href="#entity-state-detection-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Spring Data JPA는 엔티티가 새로운지 확인하기 위한 여러 방법을 제공한다.</p><p>The following table describes the strategies that Spring Data offers for detecting whether an entity is new:</p><div class="table-wrapper"><table><thead><tr><th><strong>Option</strong><th><strong>Description</strong><tbody><tr><td><strong><code class="language-plaintext highlighter-rouge">@Id</code>-Property inspection (default)</strong><td>By default, Spring Data inspects the identifier property of the given entity.<br />If the identifier property is <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">0</code> in case of primitive types,<br />then the entity is assumed to be new.<br />Otherwise, it is assumed to not be new.<tr><td><strong><code class="language-plaintext highlighter-rouge">@Version</code>-Property inspection</strong><td>If a property annotated with <code class="language-plaintext highlighter-rouge">@Version</code> is present and <code class="language-plaintext highlighter-rouge">null</code>,<br />or in case of a version property of primitive type <code class="language-plaintext highlighter-rouge">0</code><br />the entity is considered new.<br />If the version property has a value, it is not new.<br />If no version property is present, Spring Data falls back to the identifier property.<tr><td><strong>Implementing Persistable</strong><td>If an entity implements <code class="language-plaintext highlighter-rouge">Persistable</code>, Spring Data delegates<br />the new detection to the <code class="language-plaintext highlighter-rouge">isNew(…)</code> method of the entity.<br />See the <a href="https://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/domain/Persistable.html">Javadoc</a> for details.<br /><br /><strong>Note:</strong> Properties of <code class="language-plaintext highlighter-rouge">Persistable</code> will get detected and persisted if you use <code class="language-plaintext highlighter-rouge">AccessType.PROPERTY</code>.<br />To avoid this, use <code class="language-plaintext highlighter-rouge">@Transient</code>.<tr><td><strong>Custom EntityInformation implementation</strong><td>You can customize the <code class="language-plaintext highlighter-rouge">EntityInformation</code> abstraction by creating<br />a subclass of the module-specific repository factory and overriding the <code class="language-plaintext highlighter-rouge">getEntityInformation(…)</code> method.<br />You then have to register the custom implementation of the repository factory as a Spring bean.<br />Note: This is rarely necessary.</table></div><p><br /></p><p><a href="https://docs.spring.io/spring-data/r2dbc/docs/3.0.0/reference/html/#is-new-state-detection">docs.spring.io</a>에서 확인할 수 있다.</p><p><br /><br /></p><p>Spring Data JPA는 엔티티가 새로운지 확인하기 위해 <code class="language-plaintext highlighter-rouge">isNew()</code> 메서드를 호출한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="c1">// SimpleJpaRepository.class</span>
   <span class="nd">@Transactional</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="no">S</span> <span class="nf">save</span><span class="o">(</span><span class="no">S</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">entity</span><span class="o">,</span> <span class="s">"Entity must not be null"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">entityInformation</span><span class="o">.</span><span class="na">isNew</span><span class="o">(</span><span class="n">entity</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">entityManager</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">entity</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">(</span><span class="no">S</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">entityManager</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="c1">// AbstractEntityInformation.class</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isNew</span><span class="o">(</span><span class="no">T</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="no">ID</span> <span class="n">id</span> <span class="o">=</span> <span class="o">(</span><span class="no">ID</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">getId</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>
        <span class="nc">Class</span><span class="o">&lt;</span><span class="no">ID</span><span class="o">&gt;</span> <span class="n">idType</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getIdType</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">idType</span><span class="o">.</span><span class="na">isPrimitive</span><span class="o">())</span> <span class="o">{</span> <span class="c1">// wrapper class인 경우</span>
            <span class="k">return</span> <span class="n">id</span> <span class="o">==</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="k">instanceof</span> <span class="nc">Number</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// primitive type인 경우 </span>
            <span class="k">return</span> <span class="o">((</span><span class="nc">Number</span><span class="o">)</span><span class="n">id</span><span class="o">).</span><span class="na">longValue</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0L</span><span class="o">;</span> 
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Unsupported primitive id type %s"</span><span class="o">,</span> <span class="n">idType</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">entityInformation.getId(entity)</code>를 통해 엔티티의 ID 값을 가져온다.</p><ul><li><strong>ID 타입 확인</strong><ul><li><p>ID 타입이 <strong>primitive(기본형)</strong>(long, int, …) 이면 0L인지 확인</p><li><p>ID 타입이 <strong>wrapper Class</strong>(Long, Integer, …) 이면 null인지 확인</p></ul><li><p><strong>새로운 엔티티 판별</strong></p><ul><li><p>ID가 null이거나 0L인 경우: 새로운 엔티티로 간주하고 <code class="language-plaintext highlighter-rouge">persist()</code>를 호출한다.</p><li><p>ID가 존재하는 경우: 기존 엔티티로 간주하고 <code class="language-plaintext highlighter-rouge">merge()</code>를 호출한다.</p></ul></ul><p><br /></p><p><code class="language-plaintext highlighter-rouge">save()</code>의 경우 트랜잭션 오버헤드가 발생하며 대량 데이터 저장 시 성능 저하 가능성이 있고</p><p><code class="language-plaintext highlighter-rouge">saveAll()</code>은 부모 트랜잭션을 재사용하므로 여러 엔티티를 효율적으로 저장해 대량 데이터 처리에 유리하다</p><p><br /><br /><br /></p><h4 id="batch-insert"><span class="mr-2">Batch Insert</span><a href="#batch-insert" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Batch Insert는 여러 데이터를 한 번에 삽입하는 방법이다.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="o">//</span> <span class="err">개별</span> <span class="k">Insert</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">val1</span><span class="p">,</span> <span class="n">val11</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">val2</span><span class="p">,</span> <span class="n">val22</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">val3</span><span class="p">,</span> <span class="n">val33</span><span class="p">);</span>


<span class="o">//</span> <span class="n">Batch</span> <span class="k">Insert</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">)</span> <span class="k">VALUES</span>
<span class="p">(</span><span class="n">val1</span><span class="p">,</span> <span class="n">val11</span><span class="p">),</span>
<span class="p">(</span><span class="n">val2</span><span class="p">,</span> <span class="n">val22</span><span class="p">),</span>
<span class="p">(</span><span class="n">val3</span><span class="p">,</span> <span class="n">val33</span><span class="p">);</span>
</pre></table></code></div></div><p><strong>IDENTITY</strong> 전략은 데이터베이스가 기본 키(PK)를 자동으로 생성하는 방식이다.</p><p>INSERT SQL 실행하고 DB에서 식별자를 조회할 수 있다.</p><p><br /></p><p><strong>Hibernate</strong>는 보통 데이터를 DB에 저장할 때 Transactional Write Behind라는 쓰기 지연 방식을 사용한다.</p><p><code class="language-plaintext highlighter-rouge">persist()</code>를 호출하면 Hibernate는 INSERT SQL을 즉시 실행하지 않고</p><p>쓰기 지연 SQL 저장소에 해당 SQL을 보관한다.</p><p>트랜잭션이 커밋되는 시점에 한꺼번에 DB에 반영한다(이 과정을 flush라고 한다).</p><p><br /></p><p><strong>IDENTITY 전략을 사용하면 Batch Insert는 동작하지 않는다.</strong></p><p>IDENTITY 전략에서는 <code class="language-plaintext highlighter-rouge">persist()</code> 호출 시 Hibernate가 즉시 DB에 INSERT SQL을 실행해야 한다.</p><p>DB에서 생성된 ID 값을 Hibernate가 즉시 알아야 하기 때문이다.</p><p>이 과정에서 Hibernate의 쓰기 지연 방식(Transactional Write Behind)과 충돌한다.</p><p><br /></p><p>쓰기 지연 방식은 나중에 한꺼번에 DB에 반영하려고 하지만</p><p>IDENTITY 전략은 <code class="language-plaintext highlighter-rouge">persist()</code> 시점에 바로 DB에 값을 넣고 ID를 가져와야 한다.</p><p>따라서 Hibernate는 IDENTITY 전략에서 쓰기 지연을 제대로 활용할 수 없다.</p><p><br /><br /></p><p>테이블 전략을 변경하는 방법이 있지만 다른 대안인 JdbcTemplate를 사용하여 Batch Insert를 적용했다.</p><p><br /><br /><br /><br /></p><h4 id="jdbctemplate를-사용하여-batch-insert-적용하기"><span class="mr-2">JdbcTemplate를 사용하여 Batch Insert 적용하기</span><a href="#jdbctemplate를-사용하여-batch-insert-적용하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="nd">@Repository</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcRepository</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JdbcTemplate</span> <span class="n">template</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">batchInsert</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Quiz</span><span class="o">&gt;</span> <span class="n">quizList</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 1. Insert SQL 정의</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO quiz (study_id, correct, user_id) VALUES (?, ?, ?)"</span><span class="o">;</span>

        <span class="c1">// 2. Batch Insert 실행 (sql, batchArgs, batchSize, sql ?에 들어갈 값)</span>
        <span class="n">template</span><span class="o">.</span><span class="na">batchUpdate</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">quizList</span><span class="o">,</span> <span class="n">quizList</span><span class="o">.</span><span class="na">size</span><span class="o">(),</span> <span class="o">(</span><span class="n">ps</span><span class="o">,</span> <span class="n">quiz</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>

            <span class="c1">// PreparedStatement의 각 파라미터 설정</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">quiz</span><span class="o">.</span><span class="na">getStudy</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>   <span class="c1">// Study의 ID 설정</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setBoolean</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">quiz</span><span class="o">.</span><span class="na">isCorrect</span><span class="o">());</span>       <span class="c1">// Correct 상태 설정</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">quiz</span><span class="o">.</span><span class="na">getUser</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>    <span class="c1">// User의 ID 설정  </span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /><br /></p><p>saveAll에 비해 성능이 좋은지 실제 application을 실행하면서 시간을 측정해봤다.</p><p>시간 단위는 나노초이며, 데이터 10번 저장을 5번 실행해 정리했다.</p><div class="table-wrapper"><table><thead><tr><th>Batch Insert<th>saveAll<tbody><tr><td>19426400<td>14945400<tr><td>5702800<td>11311400<tr><td>8972900<td>13566300<tr><td>7505200<td>10237300<tr><td>7945800<td>11400300</table></div><p>가장 오래 걸렸던 시간은 각각 0.019426초, 0.014945초 였고</p><p>가장 짧게 걸렸던 시간은 각각 0.0057028초, 0.010237초 였다.</p><p><code class="language-plaintext highlighter-rouge">saveAll()</code> 보다 Batch Insert가 평균적으로 더 빠른 성능을 보였기 때문에 Batch Insert로 적용했다.</p><p><br /><br /><br /><br /></p><h3 id="test-코드-작성"><span class="mr-2">Test 코드 작성</span><a href="#test-코드-작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="테스트-환경-설정-변경"><span class="mr-2">테스트 환경 설정 변경</span><a href="#테스트-환경-설정-변경" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>1.</strong> IntelliJ IDEA 변경</p><p>Gradle로 되어있어서 IntelliJ IDEA로 변경</p><p><br /><br /></p><p><strong>2.</strong> gradle 확인</p><div class="language-groovy highlighter-rouge"><div class="code-header"> <span data-label-text="Groovy"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// 변경 전</span>
<span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="s1">'test'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">useJUnitPlatform</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">// 변경 후</span>
<span class="n">test</span> <span class="o">{</span>
    <span class="n">useJUnitPlatform</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><p>위 설정을 제대로 하지 않으면</p><p><em>Execution failed for task ‘:test’. &gt; There were failing tests. See the report at:</em> 와 같은 오류가 뜬다.</p><p><br /><br /><br /></p><h4 id="-parameters-옵션-설정"><span class="mr-2">-parameters 옵션 설정</span><a href="#-parameters-옵션-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>TEST 코드를 실행하기 위해서 IntelliJ IDEA로 변경했었다.</p><p>이렇게 변경 하고 나니 application 실행 할 때 아래와 같은 오류가 떴다.</p><p>Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection.</p><p>Ensure that the compiler uses the ‘-parameters’ flag*</p><p><br /><br /></p><p>찾아보니 Gradle을 사용하면 -parameters 옵션이 자동으로 적용되는데 IntelliJ IDEA는 자동이 아니라서 생긴 문제였다.</p><p><img data-src="https://github.com/user-attachments/assets/80114226-2d5f-4895-a942-bbe01fa1312e" alt="image" data-proofer-ignore></p><p>위와 같이 적용 후 <code class="language-plaintext highlighter-rouge">/out</code> 폴더를 삭제 후 컴파일되며 옵션을 적용시킨다.</p><p><br /><br /><br /><br /></p><p><strong>REFERENCE</strong> <br /> save와 saveall</p><ul><li><a href="https://wildeveloperetrain.tistory.com/305">JPA save, saveAll 성능 차이가 발생하는 이유</a><li><a href="https://hyewoncc.github.io/jpa-is-new/">[JPA]는 새로운 엔티티를 어떻게 알아볼까?</a></ul><p>Batch Insert</p><ul><li><a href="https://dkswnkk.tistory.com/682">Spring JDBC를 사용하여 Batch Insert 수행하기</a><li><a href="https://datamoney.tistory.com/319">[Batch Insert] 대량 데이터 Insert 성능 최적화 (JPA batch size / JDBCTemplate batch Insert / Mybatis batch Insert)</a><li><a href="https://dct-wonjung.tistory.com/entry/JPA-mysql-saveall-Bulk-Insert">[JPA/MySQL] saveAll() 쓰면 쿼리 하나로 나가는 거 아니었어? / JPA에서 Bulk Insert 처리해보기</a><li><a href="https://jaeseo0519.tistory.com/397">[Spring Boot] 정기 푸시 알림(Push Notification) 전송 배치(Batch) 프로세스</a></ul><p>Test</p><ul><li><a href="https://blog.naver.com/thdus3009/223432758956?trackingCode=rss">Execution failed for task ‘:test’. &gt; There were failing tests. See the report at:</a></ul><p>오류 Name for argument of type [java.lang.String] not specified</p><ul><li><a href="https://olrlobt.tistory.com/75">[Spring/Error] Name for argument of type, @PathVariable name 생략 에러</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/eng-project/'>Eng-Project</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/log/" class="post-tag no-text-decoration" >log</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Quiz+%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0+-+Dal+Blog&url=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FQuiz-%25EC%25A0%2580%25EC%259E%25A5%25ED%2595%2598%25EA%25B8%25B0%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Quiz+%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0+-+Dal+Blog&u=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FQuiz-%25EC%25A0%2580%25EC%259E%25A5%25ED%2595%2598%25EA%25B8%25B0%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fhaedal-uni.github.io%2F%2Fposts%2FQuiz-%25EC%25A0%2580%25EC%259E%25A5%25ED%2595%2598%25EA%25B8%25B0%2F&text=Quiz+%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0+-+Dal+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="haedal-uni/comments" issue-term="title" label="comments" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%ED%86%B5%ED%95%A9-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0/">통합 파일 작성하기</a><li><a href="/posts/Excel_%EC%9E%90%EB%8F%99%ED%99%94/">Excel_자동화</a><li><a href="/posts/%EB%8B%A8%EC%B6%95%ED%82%A4/">단축키</a><li><a href="/posts/%EA%B4%91%EA%B3%A0-%EB%8D%B0%EC%9D%B4%ED%84%B0/">광고 데이터</a><li><a href="/posts/Google-Analytics/">Google analytics</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/study/">study</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/chat/">Chat</a> <a class="post-tag" href="/tags/log/">log</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/websocket/">WebSocket</a> <a class="post-tag" href="/tags/data-structure/">Data-Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%9A%94%EC%95%BD/"><div class="card-body"> <em class="small" data-ts="1731423600" data-df="ll" > Nov 13, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>성능 최적화 요약</h3><div class="text-muted small"><p> 성능 최적화 요약 Chat Project Chat Project를 진행하면서 성능 개선을 위해 여러 가지 최적화 작업을 진행했다. 이를 통해 로딩 시간, 조회 속도 및 응답 시간을 크게 개선했다. 아래는 각 주요 최적화 작업과 성능 테스트 결과의 요약이다. 더 자세한 내용은 관련 링크에서 확인할 수 있다. 1. 채팅 기록 파일 조회 속도 개...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%B2%AB-%EC%8B%9C%EC%9E%91/"><div class="card-body"> <em class="small" data-ts="1657897200" data-df="ll" > Jul 16, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>첫 시작</h3><div class="text-muted small"><p> 이제 여기로! 이전에 Tistory에서 공부했던 부분이나 팀 프로젝트 했던 기록들을 적어왔었다. 회사 다니기 시작하면서 배우는 부분들을 그대로 이어서 작성해야 하나 고민했었는데 이제 여기에 배워 나가는 것들을 정리해보려고 한다😄 Spring, mysql, mybatis</p></div></div></a></div><div class="card"> <a href="/posts/%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9%EA%B3%BC-%EC%84%B1%EA%B3%BC-%EB%B6%84%EC%84%9D/"><div class="card-body"> <em class="small" data-ts="1739977200" data-df="ll" > Feb 20, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>상호작용과 성과 분석</h3><div class="text-muted small"><p> 문제 정의 사용자들의 학습성과를 높이려면? 기능 구현을 하면서 사용자들의 학습 성과를 높이려면 어떤 요소가 중요한지 고민하며 분석을 진행했다. 데이터는 Kaggle의 ONLINE EDUCATION SYSTEM REVIEW 데이터를 사용했으며 실제 프로젝트 데이터는 양이 적어 편향된 결과를 가져올 수 있어 제외했다. 데이터 전처리 1 2 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%8B%A8%EC%96%B4-%ED%95%99%EC%8A%B5-%EA%B8%B0%EB%8A%A5-%EA%B0%9C%EC%84%A0/" class="btn btn-outline-primary" prompt="Older"><p>단어 학습 기능 개선</p></a> <a href="/posts/gutter/" class="btn btn-outline-primary" prompt="Newer"><p>Gutter</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/haedal-uni">haedal-uni</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/study/">study</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/chat/">Chat</a> <a class="post-tag" href="/tags/log/">log</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/websocket/">WebSocket</a> <a class="post-tag" href="/tags/data-structure/">Data-Structure</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-K7KC8XYH0P"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-K7KC8XYH0P'); }); </script>
